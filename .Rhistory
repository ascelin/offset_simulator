collated_developments$initial_parcel_sums
collated_developments$net_gains
collated_developments$initial_parcel_sums
collated_developments$net_gains
collated_developments$avoided_degs
collated_developments$net_gains
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
par(mfrow = c(2, 1))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', mean(NNL_object$NNL_dist)), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
graphics.off()
par(mfrow = c(2, 1))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', mean(NNL_object$NNL_dist)), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
round(8.456)
par(mfrow = c(2, 1))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist)), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mfrow = c(2, 1))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mfrow = c(2, 1))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
hist(outs$collated_parcel_sets_object$offsets$initial_parcel_sums)
par(mfrow = c(2, 1))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
hist(outs$collated_parcel_sets_object$offsets$initial_parcel_sums, main = '', xlab = 'offset parcel value')
outs$parcel_trajs <- find_parcel_trajectories(land_parcels, 1:(parcels$land_parcel_num), outs$model_outputs$trajectories[[eco_ind]])
par(mfrow = c(2, 1))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
hist(outs$collated_parcel_sets_object$offsets$initial_parcel_sums, main = '', xlab = 'initial offset parcel value')
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
graphics.off()
par(mfrow = c(2, 1))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(cex = 0.6)
par(mar = c(2, 1, 1, 0), oma = c(4, 4, 0.5, 0.5))
par(tcl = -0.25)
par(mgp = c(2, 0.6, 0))
graphics.off()
par(tcl = -0.25)
par(mgp = c(2, 0.6, 0))
graphics.off()
par(mfrow = c(2, 1))
par(cex = 0.6)
hist(NNL_object$NNL_dist, main = '', xlab = xl)
graphics.off()
par(mfrow = c(2, 1))
par(mar = c(2, 1, 1, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
graphics.off()
par(mfrow = c(2, 1))
par(tcl = -0.25)
par(mgp = c(2, 0.6, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(1, 1, 1, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(2, 1, 1, 0), oma = c(4, 4, 0.5, 0.5))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(0, 1, 1, 0), oma = c(4, 4, 0.5, 0.5))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(2, 1, 1, 0), oma = c(4, 4, 0.5, 0.5))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(0, 1, 1, 0), oma = c(4, 4, 0.5, 0.5))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(0, 0, 1, 0), oma = c(4, 4, 0.5, 0.5))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(0, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
?"par"
graphics.off()
par(mar = c(0, 0, 0, 0), oma = c(0, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(0, 0, 0, 0), oma = c(4, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(0, 0, 0, 0), oma = c(8, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(4, 0, 0, 0), oma = c(8, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 0, 0, 0), oma = c(8, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 0, 0, 0), oma = c(0, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 1, 1, 0), oma = c(0, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 2, 1, 0), oma = c(0, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 2, 2, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 2, 2, 2))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 2, 2, 8))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 8, 2, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(8, 4, 2, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
graphics.off()
par(mfrow = c(2, 1))
par(mar = c(8, 4, 2, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(6, 4, 2, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(6, 4, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(6, 4, 2, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mar = c(6, 4, 2, 0), oma = c(0, 0, 0, 0))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
par(mfrow = c(2, 1))
par(mar = c(6, 4, 2, 0), oma = c(0, 0, 0, 0))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
hist(outs$collated_parcel_sets_object$offsets$initial_parcel_sums, main = '', xlab = 'initial offset parcel value')
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
rm(list = ls())
WD = getwd()
source('~/Documents/R_Codes/Offsets_Working_FEB_3/offsets_functions_current.R')
source('~/Documents/R_Codes/Offsets_Working_FEB_3/Global_Regional_Params.R')
.libPaths('~/Library/R/3.2/library')
library(foreach)
library(doParallel)
library(abind)
#offset_calc_type = 'avoided degredation', 'restoration from counterfactual', 'absolute counterfactual', 'restoration gains', 'absolute restoration'
#dev_calc_type = 'future condition', 'current condition'
global_params <- initialise_global_params()
parcels <- initialise_shape_parcels(global_params)
land_parcels <- parcels$land_parcels
index_object <- initialise_index_object(parcels, global_params)
initial_ecology <- initialise_ecology(global_params, land_parcels)
decline_rates_initial <- build_decline_rates_multi(parcels, mean_decline_rate = 0.03, decline_rate_std = 0.01, global_params$eco_dims)
region_params <- populate_region_list(offset_parcel_selection_type = 'regional', offset_calc_type = 'restoration_from_counterfactual', offset_action_type = 'restore',
offset_parcel_for_parcel = TRUE, offset_multiplier = 1, dev_calc_type = 'future_condition')
rm(list = ls())
WD = getwd()
source('~/Documents/R_Codes/Offsets_Working_FEB_3/offsets_functions_current.R')
source('~/Documents/R_Codes/Offsets_Working_FEB_3/Global_Regional_Params.R')
.libPaths('~/Library/R/3.2/library')
library(foreach)
library(doParallel)
library(abind)
#offset_calc_type = 'avoided degredation', 'restoration from counterfactual', 'absolute counterfactual', 'restoration gains', 'absolute restoration'
#dev_calc_type = 'future condition', 'current condition'
global_params <- initialise_global_params()
parcels <- initialise_shape_parcels(global_params)
land_parcels <- parcels$land_parcels
index_object <- initialise_index_object(parcels, global_params)
initial_ecology <- initialise_ecology(global_params, land_parcels)
decline_rates_initial <- build_decline_rates_multi(parcels, mean_decline_rate = 0.03, decline_rate_std = 0.01, global_params$eco_dims)
region_params <- populate_region_list(offset_parcel_selection_type = 'regional', offset_calc_type = 'restoration_from_counterfactual', offset_action_type = 'restore',
offset_parcel_for_parcel = TRUE, offset_multiplier = 1, dev_calc_type = 'future_condition')
global_params <- initialise_global_params()
parcels <- initialise_shape_parcels(global_params)
land_parcels <- parcels$land_parcels
index_object <- initialise_index_object(parcels, global_params)
initial_ecology <- initialise_ecology(global_params, land_parcels)
decline_rates_initial <- build_decline_rates_multi(parcels, mean_decline_rate = 0.03, decline_rate_std = 0.01, global_params$eco_dims)
region_params <- populate_region_list(offset_parcel_selection_type = 'regional', offset_calc_type = 'restoration_from_counterfactual', offset_action_type = 'restore',
offset_parcel_for_parcel = TRUE, offset_multiplier = 1, dev_calc_type = 'future_condition')
cfacs <- build_counterfactuals_by_parcel_multi(global_params, decline_rates_initial, 1:(parcels$land_parcel_num), land_parcels, initial_ecology, (time_horizon = global_params$time_steps - 1))
cfac_parcel_trajs <- find_parcel_traj_by_list(cfacs, global_params$time_steps)
rm(list = ls())
WD = getwd()
source('~/Documents/R_Codes/Offsets_Working_FEB_3/offsets_functions_current.R')
source('~/Documents/R_Codes/Offsets_Working_FEB_3/Global_Regional_Params.R')
.libPaths('~/Library/R/3.2/library')
library(foreach)
library(doParallel)
library(abind)
#offset_calc_type = 'avoided degredation', 'restoration from counterfactual', 'absolute counterfactual', 'restoration gains', 'absolute restoration'
#dev_calc_type = 'future condition', 'current condition'
global_params <- initialise_global_params()
parcels <- initialise_shape_parcels(global_params)
land_parcels <- parcels$land_parcels
index_object <- initialise_index_object(parcels, global_params)
initial_ecology <- initialise_ecology(global_params, land_parcels)
decline_rates_initial <- build_decline_rates_multi(parcels, mean_decline_rate = 0.03, decline_rate_std = 0.01, global_params$eco_dims)
region_params <- populate_region_list(offset_parcel_selection_type = 'regional', offset_calc_type = 'restoration_from_counterfactual', offset_action_type = 'restore',
offset_parcel_for_parcel = TRUE, offset_multiplier = 1, dev_calc_type = 'future_condition')
cfacs <- build_counterfactuals_by_parcel_multi(global_params, decline_rates_initial, 1:(parcels$land_parcel_num), land_parcels, initial_ecology, (time_horizon = global_params$time_steps - 1))
cfac_parcel_trajs <- find_parcel_traj_by_list(cfacs, global_params$time_steps)
outs <- run_offsets_model(global_params, region_params, cfacs, cfac_parcel_trajs, offset_calc_type, current_ecology = initial_ecology,
decline_rates = decline_rates_initial, parcels, perform_offsets = TRUE, set_seed = TRUE)
region_params[[1]] <- populate_region_list(offset_parcel_selection_type = 'regional', offset_calc_type = 'restoration_from_counterfactual', offset_action_type = 'restore',
offset_parcel_for_parcel = TRUE, offset_multiplier = 1, dev_calc_type = 'future_condition')
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
set_seed = TRUE
perform_offsets = TRUE
if (set_seed == TRUE){
set.seed(123)
}
outs = list()
eco_ind = 1
outs$model_outputs <- calc_trajectories_multi(global_params, region_params, current_ecology, decline_rates,
parcels, index_object, perform_offsets, record_parcel_sets = TRUE)
parcel_sets_counterfactuals <- calc_parcel_set_counterfactuals(outs$model_outputs, global_params, decline_rates_initial)
outs$parcel_sets_object <- group_parcel_sets(outs$model_outputs, parcel_sets_counterfactuals, counterfactual_type = 'counterfactual', land_parcels, global_params, decline_rates_initial)
outs$collated_parcel_sets_object <- collate_parcel_sets(outs$parcel_sets_object, global_params, global_params$eco_dims)
filename = paste('~/Documents/', offset_calc_type , '_time_horizon_', global_params$offset_time_horizon, '_',
global_params$use_offset_time_horizon, '_include_avoided_clearing_', global_params$use_adjusted_counterfactual,
'.pdf', sep = '', collapse = '')
pdf(filename)
plot_all_parcel_sets(outs$collated_parcel_sets_object, assessed_set_indexes = (1:10), global_params)
plot_parcel_set_from_collated_object(outs$collated_parcel_sets_object, assessed_set_indexes = (1:global_params$total_dev_num), global_params, global_params$eco_dims)
outs$parcel_trajs <- find_parcel_trajectories(land_parcels, 1:(parcels$land_parcel_num), outs$model_outputs$trajectories[[eco_ind]])
par(mfrow = c(2, 1))
par(mar = c(6, 4, 2, 0), oma = c(0, 0, 0, 0))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
hist(outs$collated_parcel_sets_object$offsets$initial_parcel_sums, main = '', xlab = 'initial offset parcel value')
#   parcel_sets_counterfactuals <- calc_parcel_set_counterfactuals(outs$model_outputs, global_params, decline_rates_initial)
#
#   outs$parcel_sets_object <- group_parcel_sets(outs$model_outputs, parcel_sets_counterfactuals, counterfactual_type = 'counterfactual', land_parcels, global_params, decline_rates_initial)
#
#   outs$collated_parcel_sets_object <- collate_parcel_sets(outs$parcel_sets_object, global_params, global_params$eco_dims)
#   outs$parcel_trajs <- find_parcel_trajectories(land_parcels, 1:(parcels$land_parcel_num), outs$model_outputs$trajectories[[eco_ind]])
setup_sub_plots(nx = 3, ny = 1)
total_parcel_sums = apply(outs$parcel_trajs, MARGIN = 1, sum)
total_counter_sums = apply(cfac_parcel_trajs, MARGIN = 1, sum)
plot_array = cbind(t(t(total_parcel_sums)), t(t(total_counter_sums)))
mx = max(plot_array)
mn = min(plot_array)
setup_sub_plots(nx = 1, ny = 2)
overlay_plots(plot_array, yticks = 'y', axis_lab = TRUE, ylims = c(mn, mx), (heading = "Net Ecological Value"), ylab = '', col_vec = c('black', 'black'),
lty_vec = c(1, 2), lwd_vec = c(1, 1), legend_vec = c('Offset Policy Assessment', 'Landscape Decline'), legend_loc = 'topright')
plot((total_parcel_sums - total_counter_sums), type = 'l', main = "Net NNL Assessment", ylab = '')
abline(h = 0, lty = 2)
if (set_seed == TRUE){
set.seed(123)
}
outs = list()
eco_ind = 1
outs$model_outputs <- calc_trajectories_multi(global_params, region_params, current_ecology, decline_rates,
parcels, index_object, perform_offsets, record_parcel_sets = TRUE)
parcel_sets_counterfactuals <- calc_parcel_set_counterfactuals(outs$model_outputs, global_params, decline_rates_initial)
outs$parcel_sets_object <- group_parcel_sets(outs$model_outputs, parcel_sets_counterfactuals, counterfactual_type = 'counterfactual', land_parcels, global_params, decline_rates_initial)
outs$collated_parcel_sets_object <- collate_parcel_sets(outs$parcel_sets_object, global_params, global_params$eco_dims)
filename = paste('~/Documents/', offset_calc_type , '_time_horizon_', global_params$offset_time_horizon, '_',
global_params$use_offset_time_horizon, '_include_avoided_clearing_', global_params$use_adjusted_counterfactual,
'.pdf', sep = '', collapse = '')
current_ecology = initial_ecology
decline_rates = decline_rates_initial
if (set_seed == TRUE){
set.seed(123)
}
outs = list()
eco_ind = 1
outs$model_outputs <- calc_trajectories_multi(global_params, region_params, current_ecology, decline_rates,
parcels, index_object, perform_offsets, record_parcel_sets = TRUE)
parcel_sets_counterfactuals <- calc_parcel_set_counterfactuals(outs$model_outputs, global_params, decline_rates_initial)
outs$parcel_sets_object <- group_parcel_sets(outs$model_outputs, parcel_sets_counterfactuals, counterfactual_type = 'counterfactual', land_parcels, global_params, decline_rates_initial)
outs$collated_parcel_sets_object <- collate_parcel_sets(outs$parcel_sets_object, global_params, global_params$eco_dims)
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
xl
par(mfrow = c(2, 1))
par(mar = c(6, 4, 2, 0), oma = c(0, 0, 0, 0))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
xl
parcel_sets_counterfactuals <- calc_parcel_set_counterfactuals(outs$model_outputs, global_params, decline_rates_initial)
outs$parcel_sets_object <- group_parcel_sets(outs$model_outputs, parcel_sets_counterfactuals, counterfactual_type = 'counterfactual', land_parcels, global_params, decline_rates_initial)
outs$collated_parcel_sets_object <- collate_parcel_sets(outs$parcel_sets_object, global_params, global_params$eco_dims)
outs$collated_parcel_sets_object
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
perform_offsets = TRUE
set_seed = TRUE
current_ecology = initial_ecology
decline_rates =  decline_rates_initial
if (set_seed == TRUE){
set.seed(123)
}
outs = list()
eco_ind = 1
outs$model_outputs <- calc_trajectories_multi(global_params, region_params, current_ecology, decline_rates,
parcels, index_object, perform_offsets, record_parcel_sets = TRUE)
parcel_sets_counterfactuals <- calc_parcel_set_counterfactuals(outs$model_outputs, global_params, decline_rates_initial)
outs$parcel_sets_object <- group_parcel_sets(outs$model_outputs, parcel_sets_counterfactuals, counterfactual_type = 'counterfactual', land_parcels, global_params, decline_rates_initial)
outs$collated_parcel_sets_object <- collate_parcel_sets(outs$parcel_sets_object, global_params, global_params$eco_dims)
filename = paste('~/Documents/', offset_calc_type , '_time_horizon_', global_params$offset_time_horizon, '_',
global_params$use_offset_time_horizon, '_include_avoided_clearing_', global_params$use_adjusted_counterfactual,
'.pdf', sep = '', collapse = '')
pdf(filename)
plot_all_parcel_sets(outs$collated_parcel_sets_object, assessed_set_indexes = (1:10), global_params)
plot_parcel_set_from_collated_object(outs$collated_parcel_sets_object, assessed_set_indexes = (1:global_params$total_dev_num), global_params, global_params$eco_dims)
outs$parcel_trajs <- find_parcel_trajectories(land_parcels, 1:(parcels$land_parcel_num), outs$model_outputs$trajectories[[eco_ind]])
par(mfrow = c(2, 1))
par(mar = c(6, 4, 2, 0), oma = c(0, 0, 0, 0))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
hist(outs$collated_parcel_sets_object$offsets$initial_parcel_sums, main = '', xlab = 'initial offset parcel value')
NNL_object$NNL_dist
plot_all_parcel_sets(outs$collated_parcel_sets_object, assessed_set_indexes = (1:10), global_params)
outs$collated_parcel_sets_object
graphics.off()
plot_all_parcel_sets(outs$collated_parcel_sets_object, assessed_set_indexes = (1:10), global_params)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
region_params
parcel_sets_counterfactuals <- calc_parcel_set_counterfactuals(outs$model_outputs, global_params, decline_rates_initial)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
yr = 1
current_ecology = initial_ecology
decline_rates = decline_rates_initial
perform_offsets = TRUE
record_parcel_sets = TRUE
region_ind = 1
current_dev_nums <- find_current_dev_nums(region_params, global_params$region_num, yr)
current_develop_num = current_dev_nums[region_ind]
land_parcels = parcels$land_parcels
time_horizon = 20
trajectories <- initialise_trajectories(global_params$eco_dims, global_params$ecology_size, global_params$time_steps, initial_ecologies)
offsets_object = list()
developments_object = list()
offset_devs_object <- find_developments_offsets(region_ind, global_params, region_params, current_ecology, decline_rates, parcels, index_object, perform_offsets, yr)
offset_devs_object
graphics.off()
outs$parcel_trajs
offset_devs_object
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
outs$collated_parcel_sets_object
outs$parcel_sets_object
outs$parcel_sets_object$offsets[[5]]$parcel_vals_used
outs$parcel_sets_object$developments[[5]]$parcel_vals_used
outs$parcel_sets_object$developments[[5]]$parcel_indexes
outs$parcel_sets_object$offsets[[5]]$parcel_indexes
outs$parcel_trajs
outs$parcel_sets_object$offsets[[5]]$parcel_indexes
plot(outs$parcel_sets_object$offsets[[5]]$parcel_indexes, type = 'l')
plot(outs$parcel_trajs[, 25], type = 'l')
outs$parcel_sets_object$developments[[5]]$parcel_indexes
outs$parcel_sets_object$developments[[5]]$yr
plot(outs$parcel_trajs[, 43], type = 'l')
plot(outs$parcel_trajs[, 25], type = 'l')
decline_rates_initial
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
par(mfrow = c(2, 1))
par(mar = c(6, 4, 2, 0), oma = c(0, 0, 0, 0))
NNL_object = outs$collated_parcel_sets_object$NNL_object
xl = t(cbind(paste('mean = ', round(mean(NNL_object$NNL_dist))), paste('success = ', NNL_object$success )))
hist(NNL_object$NNL_dist, main = '', xlab = xl)
hist(outs$collated_parcel_sets_object$offsets$initial_parcel_sums, main = '', xlab = 'initial offset parcel value')
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
a = -1:3
any(a >4)
any(a >3)
any(a >2)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
par(mfrow = c(3, 1))
par(mar = c(6, 4, 2, 0), oma = c(0, 0, 0, 0))
plot_parcel_set_from_collated_object(outs$collated_parcel_sets_object, assessed_set_indexes = (1:global_params$total_dev_num), global_params, global_params$eco_dims)
install.packages("rvest")
suppressMessages(library(rvest))
suppressMessages(library(dplyr))
suppressMessages(library(reshape2))
suppressMessages(library(googleVis))
install.packages("dplyr")
install.packages("reshape2")
install.packages("googleVis")
suppressMessages(library(rvest))
suppressMessages(library(dplyr))
suppressMessages(library(reshape2))
suppressMessages(library(googleVis))
webpage <- html("http://www.reed.edu/ir/geographic_states.html")
webpage <- read_html("http://www.reed.edu/ir/geographic_states.html")
webpage %>%
html_nodes("table") %>%
.[[1]] %>%
html_table()
webpage <- read_html("http://apps.webofknowledge.com.ezproxy.lib.rmit.edu.au/InterService.do?product=WOS&toPID=WOS&action=AllCitationService&isLinks=yes&highlighted_tab=WOS&last_prod=WOS&fromPID=UA&returnLink=http%3a%2f%2fapps.webofknowledge.com%2ffull_record.do%3fhighlighted_tab%3dUA%26page%3d1%26qid%3d2%26log_event%3dyes%26viewType%3dfullRecord%26SID%3dS1i2347sHVzWesr8rOe%26product%3dUA%26doc%3d2%26search_mode%3dGeneralSearch&srcDesc=RET2UA&srcAlt=Back+to+All+Databases&UT=WOS:000369001000016&search_mode=CitedRefList&SID=S1i2347sHVzWesr8rOe&parentProduct=UA&parentQid=2&parentDoc=2&recid=WOS:000369001000016&PREC_REFCOUNT=42&fromRightPanel=true")
webpage %>%
html_nodes("table") %>%
.[[1]] %>%
html_table()
webpage %>%
html_nodes("table") %>%
.[[1]] %>%
html_table(fill = TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/Global_Regional_Params.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/Global_Regional_Params.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_model.R', echo=TRUE)
suppressMessages(library(rvest))
suppressMessages(library(dplyr))
suppressMessages(library(reshape2))
suppressMessages(library(googleVis))
webpage <- html("http://www.reed.edu/ir/geographic_states.html")
# the data we want is in the first table on this page
# the html_table() command coerces the data into a data frame
webpage %>%
html_nodes("table") %>%
.[[1]] %>%
html_table()
webpage <- read_html("http://www.reed.edu/ir/geographic_states.html")
# the data we want is in the first table on this page
# the html_table() command coerces the data into a data frame
webpage %>%
html_nodes("table") %>%
.[[1]] %>%
html_table()
webpage
data
webpage$node
webpage$node()
data <-
webpage %>%
html_nodes("table") %>%
.[[1]] %>%
html_table()
data$`2008`
data$`2013`
offset_calc_type
offset_calc_type = 'restoration_from_cfac'
(offset_calc_type %in% c('restoration_from_cfac', 'restoration_gains', 'restoration_condition_value'))
summed_offset_projections = vector('list', parcel_num)
for (parcel_count_ind in seq_len(parcel_num)){
time_horizon = time_horizons[parcel_count_ind]
current_offset_prob = offset_probs[[parcel_count_ind]]
offset_proj_yrs = which(current_offset_prob > 0)
offset_proj_num = length(offset_proj_yrs)
current_parcel_ecology = current_parcel_ecologies[[parcel_count_ind]]
current_summed_offset_projections = vector('list', eco_dims)
for (eco_ind in seq_len(eco_dims)){
projected_dims = c(dim(current_parcel_ecology)[1:2], length(current_offset_prob))
current_summed_offset_projections[[eco_ind]] = array(0, projected_dims)
}
for (proj_ind in seq_len(offset_proj_num)){
proj_yr = offset_proj_yrs[proj_ind]
current_offset_proj = offset_projections[[parcel_count_ind]][[offset_proj_num]]
for (eco_ind in seq_len(eco_dims)){
current_summed_offset_projections[[eco_ind]][, , proj_yr:(time_horizon + 1)] = current_summed_offset_projections[[eco_ind]][, , proj_yr:(time_horizon + 1)] +
as.vector(current_offset_proj[[eco_ind]]*current_offset_prob[proj_yr])
}
}
summed_offset_projections[[parcel_count_ind]] = current_summed_offset_projections
}
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_program_combs.R', echo=TRUE)
source('~/Documents/R_Codes/Offsets_Working_Feb_3/run_program_combs.R', echo=TRUE)
comb_ind
